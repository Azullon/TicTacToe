(function(e){function t(t){for(var o,r,a=t[0],u=t[1],s=t[2],b=0,d=[];b<a.length;b++)r=a[b],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&d.push(c[r][0]),c[r]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);l&&l(t);while(d.length)d.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var u=n[a];0!==c[u]&&(o=!1)}o&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},c={app:0},i=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var l=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"088b":function(e,t,n){e.exports=n.p+"img/circle.8e07028a.png"},"2b09":function(e,t,n){"use strict";n("6989")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function c(e,t,n,c,i,r){var a=Object(o["k"])("login"),u=Object(o["k"])("game-result"),s=Object(o["k"])("lobby"),l=Object(o["k"])("game");return"login"==c.store.openedPage?(Object(o["g"])(),Object(o["d"])(a,{key:0,onNicknameChoosen:c.onNicknameChoosen},null,8,["onNicknameChoosen"])):c.store.isGameEndScreenShown?(Object(o["g"])(),Object(o["d"])(u,{key:1})):"lobby"==c.store.openedPage?(Object(o["g"])(),Object(o["d"])(s,{key:2})):"game"==c.store.openedPage?(Object(o["g"])(),Object(o["d"])(l,{key:3})):Object(o["e"])("",!0)}var i=Object(o["f"])("h1",{class:"login__title"},"Tic tac toe online",-1);function r(e,t,n,c,r,a){return Object(o["g"])(),Object(o["d"])("div",{class:["login",c.loginClass]},[i,Object(o["f"])("input",{type:"text",class:["login__input",c.inputClass],placeholder:"nickname",onInput:t[1]||(t[1]=function(){return c.onInput.apply(c,arguments)})},null,34),Object(o["f"])("div",{class:"login__confirm-button",onClick:t[2]||(t[2]=function(){return c.onConfirmButtonClick.apply(c,arguments)})}," let's fuck! "),Object(o["f"])("div",{class:"login__faq",onClick:t[3]||(t[3]=function(){return c.playGachiSound.apply(c,arguments)})},"FAQ")],2)}n("498a");var a=n("fc5e"),u=n.n(a),s=new Audio(u.a),l={name:"Login",setup:function(e,t){function n(){s.play()}var c=Object(o["i"])(""),i=Object(o["i"])(!0),r=Object(o["i"])(!1),a=Object(o["b"])((function(){return"login__input_"+(i.value?"correct":"incorrect")})),u=Object(o["b"])((function(){return r.value?"login_invisible":""}));function l(e){console.log("input");var t=e.target.value;""==t.trim()?i.value=!1:i.value=!0,t.length>20?e.preventDefault():c.value=t}function b(){i.value&&(t.emit("nickname-choosen",c.value),r.value=!0)}return{playGachiSound:n,nickname:c,isClosing:r,inputClass:a,loginClass:u,isNicknameValid:i,onInput:l,onConfirmButtonClick:b}}};n("5f57");l.render=r;var b=l,d={class:"lobby"},f={class:"lobby__user-name"},g={key:0,class:"lobby__user"},p=Object(o["f"])("div",{class:"lobby__user-name",style:{color:"gray"}}," sorry, but there is nobody online... ",-1);function m(e,t,n,c,i,r){return Object(o["g"])(),Object(o["d"])("div",d,[(Object(o["g"])(!0),Object(o["d"])(o["a"],null,Object(o["j"])(c.store.lobby,(function(e){return Object(o["g"])(),Object(o["d"])("div",{class:["lobby__user",{lobby__user_dark:e.inviteFor==c.store.rid}],key:e.rid},[Object(o["f"])("div",f,Object(o["l"])(e.nickname),1),c.store.isRequestSent&&c.store.requestTarget!=e.rid?Object(o["e"])("",!0):(Object(o["g"])(),Object(o["d"])("div",{key:0,class:["lobby__invite-button",{"lobby__invite-button_visible":e.inviteFor==c.store.rid}],onClick:function(t){return c.invite(e.rid)}},Object(o["l"])(c.getInviteButtonText(e)),11,["onClick"]))],2)})),128)),0==c.store.lobby.length?(Object(o["g"])(),Object(o["d"])("div",g,[p])):Object(o["e"])("",!0)])}function v(){return{id:"",rid:"",openedPage:"login",isRequestSent:!1,requestTarget:"",lobby:[],gameState:["E","E","E","E","E","E","E","E","E"],gameSide:"cross",opponentId:"",isGameEndScreenShown:!1,gameResult:"T",nickname:""}}window.__store||(window.__store=Object(o["h"])(v()));var O=window.__store;function j(){window.__store=Object(o["h"])(v())}n("a15b"),n("d3b7"),n("ac1f"),n("1276"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7");var y=n("b85c"),_=(n("caad"),n("2532"),n("8e27")),k={LOBBY:"lobby",REQUEST_SENT:"requestSent",IN_GAME:"inGame"};function S(){for(var e=O.gameState,t=(O.gameSide,0);t<3;t++){if("E"!=e[t]&&e[t]==e[t+3]&&e[t+3]==e[t+6])return e[t];if("E"!=e[3*t]&&e[3*t]==e[3*t+1]&&e[3*t+1]==e[3*t+2])return e[3*t]}return"E"!=e[0]&&e[0]==e[4]&&e[4]==e[8]||"E"!=e[2]&&e[2]==e[4]&&e[4]==e[6]?e[4]:e.includes("E")?void 0:"T"}function h(e){var t=Object(_["io"])();window.__socket=t,t.on("disconnected",(function(){j()})),t.on("authRequest",(function(){I(),U()})),t.on("ridGiven",(function(t){console.log("got ridGiven packet"),console.log(t),e.rid=t})),t.on("lobbyUpdate",(function(t){console.log("got lobbyUpdate packet"),console.log(t),e.lobby=t})),t.on("gameUpdate",(function(t){console.log("got gameUpdate packet"),console.log(t),e.gameState=t.state,e.rid==t.cross?e.gameSide="cross":e.gameSide="circle";var n=S();n&&(e.gameResult=n,e.isGameEndScreenShown=!0)})),t.on("stateUpdate",(function(t){console.log("got stateUpdate packet"),console.log(t),t.type==k.LOBBY&&(e.openedPage="lobby",e.isRequestSent=!1,e.requestTarget=""),t.type==k.IN_GAME&&(e.openedPage="game",e.isRequestSent=!1,e.requestTarget=""),t.type==k.REQUEST_SENT?(e.openedPage="lobby",e.isRequestSent=!0,e.requestTarget=t.value):e.isRequestSent=!1}))}window.__socket||h(O);var E=window.__socket;function w(e){E.emit("idUpdate",e)}function C(e){E.emit("nicknameUpdate",e)}function T(e){E.emit("requestSend",e)}function q(e){E.emit("turnMade",e)}n("c975"),n("8a79");var R=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];function G(e){var t,n="",o=e.length;for(t=2;t<o;t+=3)n+=R[e[t-2]>>2],n+=R[(3&e[t-2])<<4|e[t-1]>>4],n+=R[(15&e[t-1])<<2|e[t]>>6],n+=R[63&e[t]];return t===o+1&&(n+=R[e[t-2]>>2],n+=R[(3&e[t-2])<<4],n+="=="),t===o&&(n+=R[e[t-2]>>2],n+=R[(3&e[t-2])<<4|e[t-1]>>4],n+=R[(15&e[t-1])<<2],n+="="),n}function P(){var e,t=document.cookie.split(";"),n=Object(y["a"])(t);try{for(n.s();!(e=n.n()).done;){var o=e.value,c=o.split("=");if("id"==c[0])return c[1]}}catch(i){n.e(i)}finally{n.f()}}function x(){var e=P();if(e)return e;var t=new Uint8Array(32);window.crypto.getRandomValues(t);var n=G(t).split("=").join("");return document.cookie="id="+n,n}function I(){var e=x();w(e),O.id=e}function U(){O.nickname.length>0&&C(O.nickname)}function B(e){O.nickname=e,C(e)}function N(e){O.isRequestSent=!0,O.requestTarget=e,T(e)}function M(e){if("E"!=O.gameState[e])return!1;var t,n=0,o=0,c=Object(y["a"])(O.gameState);try{for(c.s();!(t=c.n()).done;){var i=t.value;"X"==i?o++:"O"==i&&n++}}catch(r){c.e(r)}finally{c.f()}return"cross"==O.gameSide?n==o:"circle"==O.gameSide?n==o-1:void 0}function A(e){M(e)&&(O.gameState[e]="circle"==O.gameSide?"O":"X",q(e))}var F={name:"Lobby",setup:function(){function e(e){N(e)}function t(e){return e.inviteFor==O.rid?"accept":e.rid==O.requestTarget?"cancel invite":"invite"}return{store:O,invite:e,getInviteButtonText:t}}};n("60a0");F.render=m;var L=F,X={class:"game"},Y={class:"game__caption"},Q={class:"game__field"};function J(e,t,n,c,i,r){return Object(o["g"])(),Object(o["d"])("div",X,[Object(o["f"])("div",Y,"You're playing as "+Object(o["l"])(c.store.gameSide)+".",1),Object(o["f"])("div",Q,[(Object(o["g"])(!0),Object(o["d"])(o["a"],null,Object(o["j"])(c.store.gameState,(function(e,t){return Object(o["g"])(),Object(o["d"])("div",{class:"game__cell",onClick:function(e){return c.onFieldClick(t)},key:t},["O"==e?(Object(o["g"])(),Object(o["d"])("img",{key:0,src:c.circleImage},null,8,["src"])):Object(o["e"])("",!0),"X"==e?(Object(o["g"])(),Object(o["d"])("img",{key:1,src:c.crossImage},null,8,["src"])):Object(o["e"])("",!0)],8,["onClick"])})),128))])])}var V=n("088b"),D=n.n(V),z=n("c077"),H=n.n(z),K={name:"Game",setup:function(){Object(o["i"])(["E","E","E","E","E","E","E","E","E"]);function e(e){console.log("turn made:"+e),A(e)}return{store:O,onFieldClick:e,circleImage:D.a,crossImage:H.a}}};n("2b09");K.render=J;var W=K,Z={class:"game-result"},$={class:"game-result__caption"};function ee(e,t,n,c,i,r){return Object(o["g"])(),Object(o["d"])("div",Z,[Object(o["f"])("div",$,Object(o["l"])(c.caption),1),Object(o["f"])("div",{class:"game-result__button",onClick:t[1]||(t[1]=function(){return c.onButtonClick.apply(c,arguments)})}," go back to lobby ")])}var te={name:"GameResult",setup:function(){var e=Object(o["b"])((function(){switch(O.gameResult){case"X":return"Cross wins";case"O":return"Circle wins";case"T":return"Tie"}}));function t(){O.isGameEndScreenShown=!1}return{caption:e,onButtonClick:t}}};n("6530");te.render=ee;var ne=te,oe={name:"App",components:{Login:b,Lobby:L,Game:W,GameResult:ne},setup:function(){Object(o["i"])("login");function e(e){console.log("setting nickname"),B(e)}return{onNicknameChoosen:e,store:O}}};n("9cdc");oe.render=c;var ce=oe;Object(o["c"])(ce).mount("#app")},"5f57":function(e,t,n){"use strict";n("f123")},"60a0":function(e,t,n){"use strict";n("86dd")},6530:function(e,t,n){"use strict";n("e2d5")},6989:function(e,t,n){},"86dd":function(e,t,n){},"9cdc":function(e,t,n){"use strict";n("c701")},c077:function(e,t,n){e.exports=n.p+"img/cross.b942cdd1.png"},c701:function(e,t,n){},e2d5:function(e,t,n){},f123:function(e,t,n){},fc5e:function(e,t,n){e.exports=n.p+"media/fuckYou.110633eb.mp3"}});
//# sourceMappingURL=app.f4ca7792.js.map